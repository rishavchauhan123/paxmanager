{"version":3,"file":"static/js/534.e0d111f2.chunk.js","mappings":"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","sources":["../node_modules/lucide-react/src/icons/download.ts","pages/ReportsPage.js"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4', key: 'ih7n3h' }],\n  ['polyline', { points: '7 10 12 15 17 10', key: '2ggqvy' }],\n  ['line', { x1: '12', x2: '12', y1: '15', y2: '3', key: '1vk2je' }],\n];\n\n/**\n * @component @name Download\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjEgMTV2NGEyIDIgMCAwIDEtMiAySDVhMiAyIDAgMCAxLTItMnYtNCIgLz4KICA8cG9seWxpbmUgcG9pbnRzPSI3IDEwIDEyIDE1IDE3IDEwIiAvPgogIDxsaW5lIHgxPSIxMiIgeDI9IjEyIiB5MT0iMTUiIHkyPSIzIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/download\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Download = createLucideIcon('download', __iconNode);\n\nexport default Download;\n","import React, { useEffect, useState } from 'react';\nimport { DashboardLayout } from '../components/DashboardLayout';\nimport axios from '../utils/axios';\nimport { toast } from 'sonner';\nimport { Button } from '../components/ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from '../components/ui/card';\nimport { Input } from '../components/ui/input';\nimport { Label } from '../components/ui/label';\nimport { Download } from 'lucide-react';\n\nexport default function ReportsPage() {\n  const [loading, setLoading] = useState(false);\n  const [filters, setFilters] = useState({\n    start_date: '',\n    end_date: '',\n  });\n  const [outstandingBalance, setOutstandingBalance] = useState([]);\n\n  useEffect(() => {\n    fetchOutstandingBalance();\n  }, []);\n\n  const fetchOutstandingBalance = async () => {\n    try {\n      const response = await axios.get('/reports/outstanding-balance');\n      setOutstandingBalance(response.data);\n    } catch (error) {\n      console.error('Error fetching outstanding balance:', error);\n    }\n  };\n\n  const handleDownloadPDF = async () => {\n    setLoading(true);\n    try {\n      const response = await axios.post('/reports/bookings/pdf', filters, {\n        responseType: 'blob',\n      });\n      const url = window.URL.createObjectURL(new Blob([response.data]));\n      const link = document.createElement('a');\n      link.href = url;\n      link.setAttribute('download', 'bookings_report.pdf');\n      document.body.appendChild(link);\n      link.click();\n      link.remove();\n      toast.success('PDF report downloaded');\n    } catch (error) {\n      toast.error('Error downloading PDF report');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleDownloadExcel = async () => {\n    setLoading(true);\n    try {\n      const response = await axios.post('/reports/bookings/excel', filters, {\n        responseType: 'blob',\n      });\n      const url = window.URL.createObjectURL(new Blob([response.data]));\n      const link = document.createElement('a');\n      link.href = url;\n      link.setAttribute('download', 'bookings_report.xlsx');\n      document.body.appendChild(link);\n      link.click();\n      link.remove();\n      toast.success('Excel report downloaded');\n    } catch (error) {\n      toast.error('Error downloading Excel report');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const totalOutstanding = outstandingBalance.reduce((sum, item) => sum + item.balance, 0);\n\n  return (\n    <DashboardLayout>\n      <div className=\"space-y-6 max-w-5xl mx-auto\">\n        <div>\n          <h1 className=\"text-3xl font-bold text-slate-900 tracking-tight\">Reports</h1>\n          <p className=\"text-sm text-slate-600 mt-1\">Generate and download booking reports</p>\n        </div>\n\n        {/* Filters */}\n        <Card>\n          <CardHeader>\n            <CardTitle>Report Filters</CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div>\n                <Label htmlFor=\"start_date\">Start Date</Label>\n                <Input\n                  id=\"start_date\"\n                  type=\"date\"\n                  value={filters.start_date}\n                  onChange={(e) => setFilters({ ...filters, start_date: e.target.value })}\n                  className=\"mt-1\"\n                />\n              </div>\n              <div>\n                <Label htmlFor=\"end_date\">End Date</Label>\n                <Input\n                  id=\"end_date\"\n                  type=\"date\"\n                  value={filters.end_date}\n                  onChange={(e) => setFilters({ ...filters, end_date: e.target.value })}\n                  className=\"mt-1\"\n                />\n              </div>\n            </div>\n            <div className=\"flex gap-4\">\n              <Button onClick={handleDownloadPDF} disabled={loading} data-testid=\"download-pdf-btn\">\n                <Download className=\"h-5 w-5 mr-2\" />\n                Download PDF\n              </Button>\n              <Button onClick={handleDownloadExcel} disabled={loading} variant=\"outline\" data-testid=\"download-excel-btn\">\n                <Download className=\"h-5 w-5 mr-2\" />\n                Download Excel\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Outstanding Balance */}\n        <Card>\n          <CardHeader>\n            <CardTitle>Outstanding Balance Report</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full\">\n                <thead className=\"bg-slate-50 border-b border-slate-200\">\n                  <tr>\n                    <th className=\"px-4 py-3 text-left text-xs font-semibold text-slate-700 uppercase\">PNR</th>\n                    <th className=\"px-4 py-3 text-left text-xs font-semibold text-slate-700 uppercase\">Passenger</th>\n                    <th className=\"px-4 py-3 text-left text-xs font-semibold text-slate-700 uppercase\">Supplier</th>\n                    <th className=\"px-4 py-3 text-right text-xs font-semibold text-slate-700 uppercase\">Sale Price</th>\n                    <th className=\"px-4 py-3 text-right text-xs font-semibold text-slate-700 uppercase\">Total Paid</th>\n                    <th className=\"px-4 py-3 text-right text-xs font-semibold text-slate-700 uppercase\">Balance</th>\n                  </tr>\n                </thead>\n                <tbody className=\"divide-y divide-slate-200\">\n                  {outstandingBalance.length === 0 ? (\n                    <tr>\n                      <td colSpan=\"6\" className=\"px-4 py-8 text-center text-sm text-slate-500\">\n                        No outstanding balances\n                      </td>\n                    </tr>\n                  ) : (\n                    outstandingBalance.map((item) => (\n                      <tr key={item.booking_id} className=\"hover:bg-slate-50\">\n                        <td className=\"px-4 py-3 text-sm font-mono font-medium text-slate-900\">{item.pnr}</td>\n                        <td className=\"px-4 py-3 text-sm text-slate-900\">{item.pax_name}</td>\n                        <td className=\"px-4 py-3 text-sm text-slate-900\">{item.supplier_name}</td>\n                        <td className=\"px-4 py-3 text-sm font-mono text-right text-slate-900\">${item.sale_price.toFixed(2)}</td>\n                        <td className=\"px-4 py-3 text-sm font-mono text-right text-green-600\">${item.total_paid.toFixed(2)}</td>\n                        <td className=\"px-4 py-3 text-sm font-mono text-right text-red-600 font-medium\">${item.balance.toFixed(2)}</td>\n                      </tr>\n                    ))\n                  )}\n                  {outstandingBalance.length > 0 && (\n                    <tr className=\"bg-slate-50 font-semibold\">\n                      <td colSpan=\"5\" className=\"px-4 py-3 text-sm text-right text-slate-900\">Total Outstanding:</td>\n                      <td className=\"px-4 py-3 text-sm font-mono text-right text-red-600 font-bold\">${totalOutstanding.toFixed(2)}</td>\n                    </tr>\n                  )}\n                </tbody>\n              </table>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    </DashboardLayout>\n  );\n}\n"],"names":["Download","createLucideIcon","d","key","points","x1","x2","y1","y2","ReportsPage","loading","setLoading","useState","filters","setFilters","start_date","end_date","outstandingBalance","setOutstandingBalance","useEffect","fetchOutstandingBalance","async","response","axios","get","data","error","console","totalOutstanding","reduce","sum","item","balance","_jsx","DashboardLayout","children","_jsxs","className","Card","CardHeader","CardTitle","CardContent","Label","htmlFor","Input","id","type","value","onChange","e","_objectSpread","target","Button","onClick","post","responseType","url","window","URL","createObjectURL","Blob","link","document","createElement","href","setAttribute","body","appendChild","click","remove","toast","success","disabled","variant","length","colSpan","map","pnr","pax_name","supplier_name","sale_price","toFixed","total_paid","booking_id"],"ignoreList":[],"sourceRoot":""}