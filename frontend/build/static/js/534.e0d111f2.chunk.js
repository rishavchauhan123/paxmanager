/*! For license information please see 534.e0d111f2.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[534],{2534(e,t,s){s.r(t),s.d(t,{default:()=>m});var a=s(2555),l=s(5043),d=s(1983),n=s(4473),r=s(6328),o=s(3390),c=s(1140),x=s(2264),i=s(556);const p=(0,s(7784).A)("download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);var h=s(579);function m(){const[e,t]=(0,l.useState)(!1),[s,m]=(0,l.useState)({start_date:"",end_date:""}),[j,b]=(0,l.useState)([]);(0,l.useEffect)(()=>{u()},[]);const u=async()=>{try{const e=await n.Ay.get("/reports/outstanding-balance");b(e.data)}catch(e){console.error("Error fetching outstanding balance:",e)}},g=j.reduce((e,t)=>e+t.balance,0);return(0,h.jsx)(d.N,{children:(0,h.jsxs)("div",{className:"space-y-6 max-w-5xl mx-auto",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("h1",{className:"text-3xl font-bold text-slate-900 tracking-tight",children:"Reports"}),(0,h.jsx)("p",{className:"text-sm text-slate-600 mt-1",children:"Generate and download booking reports"})]}),(0,h.jsxs)(c.Zp,{children:[(0,h.jsx)(c.aR,{children:(0,h.jsx)(c.ZB,{children:"Report Filters"})}),(0,h.jsxs)(c.Wu,{className:"space-y-4",children:[(0,h.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)(i.J,{htmlFor:"start_date",children:"Start Date"}),(0,h.jsx)(x.p,{id:"start_date",type:"date",value:s.start_date,onChange:e=>m((0,a.A)((0,a.A)({},s),{},{start_date:e.target.value})),className:"mt-1"})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)(i.J,{htmlFor:"end_date",children:"End Date"}),(0,h.jsx)(x.p,{id:"end_date",type:"date",value:s.end_date,onChange:e=>m((0,a.A)((0,a.A)({},s),{},{end_date:e.target.value})),className:"mt-1"})]})]}),(0,h.jsxs)("div",{className:"flex gap-4",children:[(0,h.jsxs)(o.$,{onClick:async()=>{t(!0);try{const e=await n.Ay.post("/reports/bookings/pdf",s,{responseType:"blob"}),t=window.URL.createObjectURL(new Blob([e.data])),a=document.createElement("a");a.href=t,a.setAttribute("download","bookings_report.pdf"),document.body.appendChild(a),a.click(),a.remove(),r.oR.success("PDF report downloaded")}catch(e){r.oR.error("Error downloading PDF report")}finally{t(!1)}},disabled:e,"data-testid":"download-pdf-btn",children:[(0,h.jsx)(p,{className:"h-5 w-5 mr-2"}),"Download PDF"]}),(0,h.jsxs)(o.$,{onClick:async()=>{t(!0);try{const e=await n.Ay.post("/reports/bookings/excel",s,{responseType:"blob"}),t=window.URL.createObjectURL(new Blob([e.data])),a=document.createElement("a");a.href=t,a.setAttribute("download","bookings_report.xlsx"),document.body.appendChild(a),a.click(),a.remove(),r.oR.success("Excel report downloaded")}catch(e){r.oR.error("Error downloading Excel report")}finally{t(!1)}},disabled:e,variant:"outline","data-testid":"download-excel-btn",children:[(0,h.jsx)(p,{className:"h-5 w-5 mr-2"}),"Download Excel"]})]})]})]}),(0,h.jsxs)(c.Zp,{children:[(0,h.jsx)(c.aR,{children:(0,h.jsx)(c.ZB,{children:"Outstanding Balance Report"})}),(0,h.jsx)(c.Wu,{children:(0,h.jsx)("div",{className:"overflow-x-auto",children:(0,h.jsxs)("table",{className:"w-full",children:[(0,h.jsx)("thead",{className:"bg-slate-50 border-b border-slate-200",children:(0,h.jsxs)("tr",{children:[(0,h.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-700 uppercase",children:"PNR"}),(0,h.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-700 uppercase",children:"Passenger"}),(0,h.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-700 uppercase",children:"Supplier"}),(0,h.jsx)("th",{className:"px-4 py-3 text-right text-xs font-semibold text-slate-700 uppercase",children:"Sale Price"}),(0,h.jsx)("th",{className:"px-4 py-3 text-right text-xs font-semibold text-slate-700 uppercase",children:"Total Paid"}),(0,h.jsx)("th",{className:"px-4 py-3 text-right text-xs font-semibold text-slate-700 uppercase",children:"Balance"})]})}),(0,h.jsxs)("tbody",{className:"divide-y divide-slate-200",children:[0===j.length?(0,h.jsx)("tr",{children:(0,h.jsx)("td",{colSpan:"6",className:"px-4 py-8 text-center text-sm text-slate-500",children:"No outstanding balances"})}):j.map(e=>(0,h.jsxs)("tr",{className:"hover:bg-slate-50",children:[(0,h.jsx)("td",{className:"px-4 py-3 text-sm font-mono font-medium text-slate-900",children:e.pnr}),(0,h.jsx)("td",{className:"px-4 py-3 text-sm text-slate-900",children:e.pax_name}),(0,h.jsx)("td",{className:"px-4 py-3 text-sm text-slate-900",children:e.supplier_name}),(0,h.jsxs)("td",{className:"px-4 py-3 text-sm font-mono text-right text-slate-900",children:["$",e.sale_price.toFixed(2)]}),(0,h.jsxs)("td",{className:"px-4 py-3 text-sm font-mono text-right text-green-600",children:["$",e.total_paid.toFixed(2)]}),(0,h.jsxs)("td",{className:"px-4 py-3 text-sm font-mono text-right text-red-600 font-medium",children:["$",e.balance.toFixed(2)]})]},e.booking_id)),j.length>0&&(0,h.jsxs)("tr",{className:"bg-slate-50 font-semibold",children:[(0,h.jsx)("td",{colSpan:"5",className:"px-4 py-3 text-sm text-right text-slate-900",children:"Total Outstanding:"}),(0,h.jsxs)("td",{className:"px-4 py-3 text-sm font-mono text-right text-red-600 font-bold",children:["$",g.toFixed(2)]})]})]})]})})})]})]})})}}}]);
//# sourceMappingURL=534.e0d111f2.chunk.js.map