"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[542],{9542(e,s,t){t.r(s),t.d(s,{default:()=>p});var i=t(5043),l=t(5685),a=t(1983),n=t(4473),d=t(8729),c=t(6328),r=t(6047),o=t(3390),m=t(5949),x=t(1140),u=t(6833),v=t(579);function p(){var e,s,t;const{id:p}=(0,l.g)(),{user:h}=(0,d.A)(),j=(0,l.Zp)(),[f,N]=(0,i.useState)(null),[g,b]=(0,i.useState)(!0);(0,i.useEffect)(()=>{y()},[p]);const y=async()=>{try{const e=await n.Ay.get("/bookings/".concat(p));N(e.data)}catch(e){c.oR.error("Error loading booking"),j("/bookings")}finally{b(!1)}};if(g)return(0,v.jsx)(a.N,{children:(0,v.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,v.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})});const _=(0,r.hk)(null===f||void 0===f?void 0:f.installments),k=(0,r.Bk)(null===f||void 0===f?void 0:f.sale_price,null===f||void 0===f?void 0:f.installments);return(0,v.jsx)(a.N,{children:(0,v.jsxs)("div",{className:"space-y-6 max-w-5xl mx-auto",children:[(0,v.jsxs)("div",{className:"flex items-center justify-between",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("h1",{className:"text-3xl font-bold text-slate-900 tracking-tight",children:"Booking Details"}),(0,v.jsx)("p",{className:"text-sm text-slate-600 mt-1 font-mono",children:null===f||void 0===f?void 0:f.pnr})]}),(0,v.jsx)(m.E,{className:(0,r.qY)(null===f||void 0===f?void 0:f.status),children:(0,r.ps)(null===f||void 0===f?void 0:f.status)})]}),(0,v.jsx)(x.Zp,{children:(0,v.jsx)(x.Wu,{className:"pt-6",children:(0,v.jsxs)("div",{className:"flex gap-4",children:["agent1"===(null===h||void 0===h?void 0:h.role)&&"draft"===(null===f||void 0===f?void 0:f.status)&&(0,v.jsx)(o.$,{onClick:async()=>{try{await n.Ay.put("/bookings/".concat(p,"/submit")),c.oR.success("Booking submitted for verification"),y()}catch(t){var e,s;c.oR.error((null===(e=t.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.detail)||"Error submitting booking")}},"data-testid":"submit-booking-btn",children:"Submit for Verification"}),("account"===(null===h||void 0===h?void 0:h.role)||"admin"===(null===h||void 0===h?void 0:h.role))&&"pending_verification"===(null===f||void 0===f?void 0:f.status)&&(0,v.jsxs)(o.$,{onClick:async()=>{try{await n.Ay.put("/bookings/".concat(p,"/verify-account")),c.oR.success("Booking verified by Account"),y()}catch(t){var e,s;c.oR.error((null===(e=t.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.detail)||"Error verifying booking")}},"data-testid":"account-verify-btn",children:[(0,v.jsx)(u.A,{className:"h-5 w-5 mr-2"}),"Verify (Account)"]}),"admin"===(null===h||void 0===h?void 0:h.role)&&"account_verified"===(null===f||void 0===f?void 0:f.status)&&(0,v.jsxs)(o.$,{onClick:async()=>{try{await n.Ay.put("/bookings/".concat(p,"/verify-admin")),c.oR.success("Booking verified by Admin"),y()}catch(t){var e,s;c.oR.error((null===(e=t.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.detail)||"Error verifying booking")}},"data-testid":"admin-verify-btn",children:[(0,v.jsx)(u.A,{className:"h-5 w-5 mr-2"}),"Verify (Admin)"]})]})})}),(0,v.jsxs)(x.Zp,{children:[(0,v.jsx)(x.aR,{children:(0,v.jsx)(x.ZB,{children:"Passenger & Contact Details"})}),(0,v.jsxs)(x.Wu,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("p",{className:"text-xs font-medium text-slate-500 uppercase",children:"Passenger Name"}),(0,v.jsx)("p",{className:"text-sm font-medium text-slate-900 mt-1",children:null===f||void 0===f?void 0:f.pax_name})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("p",{className:"text-xs font-medium text-slate-500 uppercase",children:"Contact Person"}),(0,v.jsx)("p",{className:"text-sm text-slate-900 mt-1",children:(null===f||void 0===f?void 0:f.contact_person)||"N/A"})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("p",{className:"text-xs font-medium text-slate-500 uppercase",children:"Contact Number"}),(0,v.jsx)("p",{className:"text-sm font-mono text-slate-900 mt-1",children:null===f||void 0===f?void 0:f.contact_number})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("p",{className:"text-xs font-medium text-slate-500 uppercase",children:"PNR"}),(0,v.jsx)("p",{className:"text-sm font-mono font-medium text-slate-900 mt-1",children:null===f||void 0===f?void 0:f.pnr})]})]})]}),(0,v.jsxs)(x.Zp,{children:[(0,v.jsx)(x.aR,{children:(0,v.jsx)(x.ZB,{children:"Travel Details"})}),(0,v.jsxs)(x.Wu,{className:"space-y-4",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("p",{className:"text-xs font-medium text-slate-500 uppercase",children:"Airline"}),(0,v.jsx)("p",{className:"text-sm font-medium text-slate-900 mt-1",children:null===f||void 0===f?void 0:f.airline})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("p",{className:"text-xs font-medium text-slate-500 uppercase mb-2",children:"Travel Legs"}),null===f||void 0===f||null===(e=f.travel_details)||void 0===e||null===(s=e.legs)||void 0===s?void 0:s.map((e,s)=>(0,v.jsx)("div",{className:"p-3 bg-slate-50 rounded-md mb-2",children:(0,v.jsxs)("p",{className:"text-sm text-slate-900",children:[e.from_location," \u2192 ",e.to_location," on ",e.travel_date,e.return_date&&" (Return: ".concat(e.return_date,")")]})},s))]}),(null===f||void 0===f||null===(t=f.travel_details)||void 0===t?void 0:t.note)&&(0,v.jsxs)("div",{children:[(0,v.jsx)("p",{className:"text-xs font-medium text-slate-500 uppercase",children:"Note"}),(0,v.jsx)("p",{className:"text-sm text-slate-600 mt-1",children:f.travel_details.note})]})]})]}),(0,v.jsxs)(x.Zp,{children:[(0,v.jsx)(x.aR,{children:(0,v.jsx)(x.ZB,{children:"Commercial Details"})}),(0,v.jsxs)(x.Wu,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("p",{className:"text-xs font-medium text-slate-500 uppercase",children:"Our Cost"}),(0,v.jsx)("p",{className:"text-sm font-mono font-medium text-slate-900 mt-1",children:(0,r.vv)(null===f||void 0===f?void 0:f.our_cost)})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("p",{className:"text-xs font-medium text-slate-500 uppercase",children:"Sale Price"}),(0,v.jsx)("p",{className:"text-sm font-mono font-medium text-slate-900 mt-1",children:(0,r.vv)(null===f||void 0===f?void 0:f.sale_price)})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("p",{className:"text-xs font-medium text-slate-500 uppercase",children:"Total Paid"}),(0,v.jsx)("p",{className:"text-sm font-mono font-medium text-green-600 mt-1",children:(0,r.vv)(_)})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("p",{className:"text-xs font-medium text-slate-500 uppercase",children:"Balance"}),(0,v.jsx)("p",{className:"text-sm font-mono font-medium text-red-600 mt-1",children:(0,r.vv)(k)})]})]})]}),(0,v.jsxs)(x.Zp,{children:[(0,v.jsx)(x.aR,{children:(0,v.jsx)(x.ZB,{children:"Timestamps"})}),(0,v.jsxs)(x.Wu,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("p",{className:"text-xs font-medium text-slate-500 uppercase",children:"Created At"}),(0,v.jsx)("p",{className:"text-sm text-slate-900 mt-1",children:(0,r.r6)(null===f||void 0===f?void 0:f.created_at)})]}),(null===f||void 0===f?void 0:f.submitted_at)&&(0,v.jsxs)("div",{children:[(0,v.jsx)("p",{className:"text-xs font-medium text-slate-500 uppercase",children:"Submitted At"}),(0,v.jsx)("p",{className:"text-sm text-slate-900 mt-1",children:(0,r.r6)(f.submitted_at)})]}),(null===f||void 0===f?void 0:f.account_verified_at)&&(0,v.jsxs)("div",{children:[(0,v.jsx)("p",{className:"text-xs font-medium text-slate-500 uppercase",children:"Account Verified At"}),(0,v.jsx)("p",{className:"text-sm text-slate-900 mt-1",children:(0,r.r6)(f.account_verified_at)})]}),(null===f||void 0===f?void 0:f.admin_verified_at)&&(0,v.jsxs)("div",{children:[(0,v.jsx)("p",{className:"text-xs font-medium text-slate-500 uppercase",children:"Admin Verified At"}),(0,v.jsx)("p",{className:"text-sm text-slate-900 mt-1",children:(0,r.r6)(f.admin_verified_at)})]})]})]})]})})}}}]);
//# sourceMappingURL=542.6f68660d.chunk.js.map